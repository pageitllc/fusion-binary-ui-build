import{s as O,r,c as S,m as z,q as D,o as E,a as t,f as d,d as h,t as f,g as c,F as W,h as B,v as b,l as M,b as w,w as F,x as P,T as j,j as l,k as Q,e as X,n as Y,y as G,i as R}from"./iframe-4anGkjM3.js";import{F as I}from"./FusionTextInput-B7zbcKHf.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={key:0,class:"fu-status-dropdown__label-text"},K={key:1},Z={key:0},ee=["src"],ae=["onClick"],le={key:1,class:"fu-placeholder"},te={key:1,class:"flex flex--center flex--gap-md"},ne=["src"],se={key:2,class:"fu-status-dropdown__input-trigger"},ue={key:0,class:"fu-search-wrapper"},oe={key:1,class:"fu-options-scroll scrollbar__control customScrollBar"},re=["onClick"],ie=["src"],ce={key:2,class:"fu-status-dropdown__empty"},de={key:3,class:"fu-input-error"},A=O({__name:"FusionAutocomplete",props:{options:{},modelValue:{default:null},multiple:{type:Boolean,default:!1},placeholder:{default:"Select..."},searchable:{type:Boolean,default:!0},noResultsText:{default:"No results found"},searchPlaceholder:{default:"Search..."},label:{default:""},variant:{default:"button"},size:{default:"md"},formWrapperWidth:{default:""},error:{default:null},async:{type:Boolean,default:!1},minSearchLength:{default:2},loading:{type:Boolean,default:!1}},emits:["update:modelValue","search"],setup(n,{emit:T}){const o=n,v=T,m=r(!1),p=r(""),g=r(null),y=r(null),$=r(null),V=r(null),_=r({}),i=r(null),u=r([]),x=S(()=>o.async===!0);z(()=>o.modelValue,a=>{o.multiple&&Array.isArray(a)?u.value=a:i.value=a},{immediate:!0}),z(p,a=>{x.value&&(a.length<o.minSearchLength||v("search",a))});const q=S(()=>x.value||!p.value?o.options:o.options.filter(a=>a.label.toLowerCase().includes(p.value.toLowerCase())));function k(){m.value=!m.value,m.value&&R(()=>{const a=g.value?.querySelector("button, input");if(!a||!y.value)return;const s=a.getBoundingClientRect();_.value={position:"absolute",top:`${s.bottom+window.scrollY}px`,left:`${s.left+window.scrollX}px`,width:`${s.width}px`,zIndex:"9999"},o.searchable&&R(()=>{const e=V.value?.$el?.querySelector("input")||y.value?.querySelector("input");e?.focus(),e?.select()})})}function L(a){if(o.multiple){const s=u.value.find(e=>e.value===a.value);u.value=s?u.value.filter(e=>e.value!==a.value):[...u.value,a],v("update:modelValue",u.value)}else i.value=a,v("update:modelValue",a),m.value=!1}function N(a){u.value=u.value.filter(s=>s.value!==a.value),v("update:modelValue",u.value)}function C(a){g.value?.contains(a.target)||y.value?.contains(a.target)||(m.value=!1)}return D(()=>document.addEventListener("click",C)),E(()=>document.removeEventListener("click",C)),(a,s)=>(l(),t("div",{class:"fu-status-dropdown",ref_key:"dropdownRef",ref:g},[n.label?(l(),t("div",J,f(n.label),1)):d("",!0),n.variant==="button"?(l(),t("div",K,[c("button",{class:M(["fu-status-dropdown__button",[`fu-input--${n.size}`,{"fu-input--error":n.error}]]),onClick:k},[n.multiple?(l(),t("div",Z,[u.value.length?(l(!0),t(W,{key:0},B(u.value,e=>(l(),t("span",{key:e.value,class:"fu-tag"},[e.type==="icon"?(l(),h(b(e.icon),{key:0,size:"14"})):e.type==="image"?(l(),t("img",{key:1,src:e.imageUrl,class:"fu-option-image",alt:"User Image"},null,8,ee)):d("",!0),Q(" "+f(e.label)+" ",1),c("span",{class:"fu-tag__remove",onClick:X(U=>N(e),["stop"])},"×",8,ae)]))),128)):(l(),t("span",le,f(n.placeholder),1))])):(l(),t("div",te,[i.value?.type==="icon"?(l(),h(b(i.value.icon),{key:0,size:"16"})):i.value?.type==="image"?(l(),t("img",{key:1,src:i.value.imageUrl,class:"fu-option-image",alt:"User Image"},null,8,ne)):d("",!0),c("span",null,f(i.value?.label||n.placeholder),1)])),s[2]||(s[2]=c("svg",{class:"fu-status-dropdown__chevron",viewBox:"0 0 20 20"},[c("path",{d:"M6 8l4 4 4-4",stroke:"currentColor","stroke-width":"1.5"})],-1))],2)])):(l(),t("div",se,[w(I,{size:n.size,readonly:"",variant:"outline",formWrapperWidth:n.formWrapperWidth,placeholder:i.value?.label||n.placeholder,onFocus:k,onClick:k},null,8,["size","formWrapperWidth","placeholder"])])),(l(),h(j,{to:"body"},[w(P,{name:"fade"},{default:F(()=>[m.value?(l(),t("div",{key:0,class:"fu-status-dropdown__menu",style:Y(_.value),ref_key:"menuRef",ref:y},[n.searchable?(l(),t("div",ue,[w(I,{ref_key:"searchInputRef",ref:V,modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),type:"text",placeholder:n.searchPlaceholder,size:n.size,formWrapperWidth:"100%"},{right:F(()=>[c("button",{class:"fu-search-clear",onClick:s[0]||(s[0]=e=>p.value="")},"×")]),_:1},8,["modelValue","placeholder","size"])])):d("",!0),q.value.length?(l(),t("div",oe,[(l(!0),t(W,null,B(q.value,e=>(l(),t("div",{key:e.value,class:"fu-status-dropdown__item",onClick:U=>L(e)},[e.type==="icon"?(l(),h(b(e.icon),{key:0,size:"16"})):e.type==="image"?(l(),t("img",{key:1,src:e.imageUrl,class:"fu-option-image"},null,8,ie)):d("",!0),c("span",null,f(e.label),1)],8,re))),128)),c("div",{class:"fu-status-dropdown__slot-actions",ref_key:"actionsRef",ref:$},[G(a.$slots,"actions")],512)])):(l(),t("div",ce,f(n.noResultsText),1))],4)):d("",!0)]),_:3})])),n.error?(l(),t("span",de,f(n.error),1)):d("",!0)],512))}}),ve=H(A,[["__scopeId","data-v-5655257c"]]);A.__docgenInfo={exportName:"default",displayName:"FusionAutocomplete",description:"",tags:{},props:[{name:"options",required:!0,type:{name:"Array",elements:[{name:"Option"}]}},{name:"modelValue",required:!1,type:{name:"union",elements:[{name:"Option"},{name:"Array",elements:[{name:"Option"}]},{name:"null"}]},defaultValue:{func:!1,value:"null"}},{name:"multiple",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"Select..."'}},{name:"searchable",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"noResultsText",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"No results found"'}},{name:"searchPlaceholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"Search..."'}},{name:"label",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"variant",required:!1,type:{name:"union",elements:[{name:'"button"'},{name:'"input"'}]},defaultValue:{func:!1,value:'"button"'}},{name:"size",required:!1,type:{name:"union",elements:[{name:'"sm"'},{name:'"md"'},{name:'"lg"'}]},defaultValue:{func:!1,value:'"md"'}},{name:"formWrapperWidth",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"error",required:!1,type:{name:"union",elements:[{name:"string"},{name:"null"}]},defaultValue:{func:!1,value:"null"}},{name:"async",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"minSearchLength",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"2"}},{name:"loading",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"search"}],slots:[{name:"actions"}],sourceFiles:["/Users/xavier/Documents/Websites/Skkido/Fusion-binary-ui/src/components/autocomplete/FusionAutocomplete.vue"]};export{ve as F};
