import{s as J,r as u,c as x,m as O,q as P,o as Q,a as l,g as a,f as c,u as T,b as q,F as z,h as L,j as i,l as f,n as B,p as N,e as w,d as Z,v as ee,t as R,y as j}from"./iframe-4anGkjM3.js";import{F as H}from"./FusionCheckbox-E0ZNdIAP.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={key:0},se={key:0,class:"fu-listview__th fu-listview__th--checkbox"},oe=["role","tabindex","onClick","onKeydown"],ie={class:"fu-listview__th-label"},le={key:1,class:"fu-listview__sort-indicator"},ae=["onMousedown"],re=["onClick"],ue={class:"fu-listview__cell"},M=J({__name:"FusionListView",props:{columns:{},rows:{},rowKey:{},showHeader:{type:Boolean},sort:{},options:{}},emits:["row-selected","row-clicked","sort-change"],setup(r,{emit:U}){const o=r,y=U,d=u(o.columns.map(e=>({...e,width:e.width||"150px",textAlign:e.textAlign||"justify",sortable:!!e.sortable}))),p=u(!1),W=u(null),V=u(null),E=u(null),F=u("asc"),b=x(()=>!!o.sort),_=x(()=>b.value?o.sort?.key??null:E.value),$=x(()=>b.value?o.sort?.direction??"asc":F.value),I=o.showHeader??!0,X=()=>o.options?.sortable!==!1;function k(e){return o.options?.selectable?o.options?.isRowSelectable?o.options.isRowSelectable(e):!0:!1}function A(){const e=o.rows.filter(n=>n.__selected&&k(n));y("row-selected",e)}O(p,e=>{o.options?.selectable&&(o.rows.forEach(n=>{k(n)&&(n.__selected=e)}),A())});function h(e){if(!X()||!e.sortable)return;const n=_.value,t=$.value;let s="asc";n===e.key&&(s=t==="asc"?"desc":"asc"),b.value||(E.value=e.key,F.value=s),y("sort-change",{key:e.key,direction:s})}function Y(e){y("row-clicked",e),o.options?.onRowClick?.(e)}let m=null,D=0,K=0;function G(e,n){o.options?.resizeColumn&&(m=n,D=e.clientX,K=parseInt(d.value[n].width,10),document.addEventListener("mousemove",g),document.addEventListener("mouseup",C))}function g(e){if(m===null)return;const n=e.clientX-D;d.value[m].width=`${Math.max(60,K+n)}px`}function C(){m=null,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)}function S(){const e=V.value;e&&(e.style.overflowY="hidden",requestAnimationFrame(()=>{e.style.overflowY="auto"}))}return P(()=>{S(),window.addEventListener("resize",S)}),Q(()=>{window.removeEventListener("resize",S),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)}),(e,n)=>(i(),l("div",{class:"fu-listview",ref_key:"listviewRef",ref:W},[a("div",{class:"fu-listview__table-wrapper customScrollBar",ref_key:"tableWrapper",ref:V},[a("table",null,[T(I)?(i(),l("thead",ne,[a("tr",null,[r.options?.selectable?(i(),l("th",se,[q(H,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=t=>p.value=t),size:"sm"},null,8,["modelValue"])])):c("",!0),(i(!0),l(z,null,L(d.value,(t,s)=>(i(),l("th",{key:t.key,style:B({width:t.width||"auto"}),class:f(["fu-listview__th",`align-${t.textAlign||"justify"}`])},[a("div",{class:f(["fu-listview__th-content",`align-${t.textAlign||"justify"}`])},[a("div",{class:f(["fu-listview__th-sortable",{"is-sortable":!!t.sortable,"is-active":_.value===t.key}]),role:t.sortable?"button":void 0,tabindex:t.sortable?0:-1,onClick:v=>h(t),onKeydown:[N(w(v=>h(t),["prevent"]),["enter"]),N(w(v=>h(t),["prevent"]),["space"])]},[t.icon?(i(),Z(ee(t.icon),{key:0,class:"fu-listview__th-icon"})):c("",!0),a("span",ie,R(t.label),1),t.sortable&&_.value===t.key?(i(),l("span",le,R($.value==="asc"?"▲":"▼"),1)):c("",!0)],42,oe),r.options?.resizeColumn?(i(),l("span",{key:0,class:"fu-listview__resize-handle",onMousedown:w(v=>G(v,s),["stop"])},null,40,ae)):c("",!0)],2)],6))),128))])])):c("",!0),a("tbody",null,[(i(!0),l(z,null,L(r.rows,t=>(i(),l("tr",{key:t[r.rowKey],class:"fu-listview__row",onClick:s=>Y(t)},[r.options?.selectable?(i(),l("td",{key:0,class:"fu-listview__td fu-listview__td--checkbox",onClick:n[1]||(n[1]=w(()=>{},["stop"]))},[q(H,{modelValue:t.__selected,"onUpdate:modelValue":s=>t.__selected=s,onChange:A,size:"sm",disabled:!k(t)},null,8,["modelValue","onUpdate:modelValue","disabled"])])):c("",!0),j(e.$slots,"tableRow",{row:t},()=>[(i(!0),l(z,null,L(d.value,s=>(i(),l("td",{key:s.key,class:f(["fu-listview__td",`align-${s.textAlign||"justify"}`]),style:B({width:s.width})},[j(e.$slots,`cell-${s.key}`,{row:t,col:s},()=>[a("span",ue,R(t[s.key]),1)],!0)],6))),128))],!0)],8,re))),128))])])],512)],512))}}),ve=te(M,[["__scopeId","data-v-9ba04eb3"]]);M.__docgenInfo={exportName:"default",displayName:"FusionListView",description:"",tags:{},props:[{name:"columns",required:!0,type:{name:"Array",elements:[{name:"ListColumn"}]}},{name:"rows",required:!0,type:{name:"Array",elements:[{name:"Record",elements:[{name:"string"},{name:"any"}]}]}},{name:"rowKey",required:!0,type:{name:"string"}},{name:"showHeader",required:!1,type:{name:"boolean"}},{name:"sort",description:"NEW: controlled sort support",required:!1,type:{name:"union",elements:[{name:`{
  key: string | null;
  direction: SortDirection;
}`},{name:"null"}]}},{name:"options",required:!1,type:{name:`{
  onRowClick?: (row: any) => void;
  selectable?: boolean;
  resizeColumn?: boolean;
  sortable?: boolean;
  isRowSelectable?: (row: any) => boolean;
}`}}],events:[{name:"row-selected",type:{names:["Array"],elements:[{name:"any"}]}},{name:"row-clicked",type:{names:["any"]}},{name:"sort-change",type:{names:["{ key: string; direction: SortDirection }"]}}],slots:[{name:"tableRow",scoped:!0,bindings:[{name:"row",title:"binding"}]},{name:"`cell-${col.key}`",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"row",title:"binding"},{name:"col",title:"binding"}]}],sourceFiles:["/Users/xavier/Documents/Websites/Skkido/Fusion-binary-ui/src/components/list/FusionListView.vue"]};export{ve as F};
